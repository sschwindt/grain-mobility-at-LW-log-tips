# Estimate grain mobility conditions at the tip of large wood (LW) logs

This repository contains a Python script to estimate the bulk discharge, water depth, and mean velocity required to initiate grain motion at a log tip, using the Shields stress as mobility criterion with an optional turbulence augmentation and a tip velocity multiplier based on:

* Schalko, Ponce et al. (2024) Flow and Turbulence Due To Wood Contribute to Declogging of Gravel Bed. GRL 51. https://doi.org/10.1029/2023GL107507
* Schalko, Follett, Nepf (2023) Impact of Lateral Gap on Flow Distribution, Backwater Rise, and Turbulence Generated by a Logjam. Water Resources Research 59:e2023WR034689. https://doi.org/10.1029/2023WR034689
* Schalko, Wohl, Nepf (2021) Flow and wake characteristics associated with large wood to inform river restoration. Sci Rep 11:8644. https://doi.org/10.1038/s41598-021-87892-7

**Note:** The results calculated with this script are intended for the design of laboratory flume experiments, especially for the assessment of meaningful relationships between log size, grain size, channel slope, and discharge. So the results are design estimates under a uniform flow closure. The script does not resolve backwater or head loss induced by the log.

## Minimum requirements

Python 3.8 or newer.

No third party packages are required. The script uses only the Python standard library.

## What it does

The script calibrates a Darcy Weisbach style friction coefficient `Cf` (cf. [Julien 2012](https://doi.org/10.1017/CBO9780511806049)) from a reference unobstructed uniform flow mobility condition, then solves for the bulk flow depth and discharge that produce a mean velocity consistent with the critical log tip velocity required for incipient motion. It prints results to the console and also writes the same output to a log file created next to the script. 

## Usage

Run from a terminal:

```bash
python3 calculate_Qcrit_log.py
````

The main user inputs are near the top of the file under the user parameter block, including `w_channel`, `S`, `d50`, `log_diameter`, `log_length`, and `multiplier`. Edit those values, save, and run again. 

The turbulence settings are set inside `flume_design_processor()` via `beta` and `gamma`. Set `gamma = 0.0` to disable turbulence augmentation and use a mean velocity threshold with the tip multiplier only. 

## Output

The script prints a setup summary to a logfile named `logL={}-logD={}-channelW={}-uUmult={}-d50={}.log`, which contains the hydraulic conditions for incipient grain motion at the log tip compared to bulk flow conditions, and calibrated `Cf`. The logfile is written in the same directory. 






